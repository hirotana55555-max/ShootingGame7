# ãƒ‡ãƒãƒƒã‚°ãƒ»é–‹ç™ºæ”¯æ´æ©Ÿèƒ½ç®¡ç†ãƒãƒªã‚·ãƒ¼ï¼ˆDEBUGGING_POLICY.mdï¼‰

## 1. ç›®çš„

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ™ãƒ¼ã‚¹ã®IDEï¼ˆBlitzIDEï¼‰ãŠã‚ˆã³ãƒ¡ãƒ¢ãƒªåˆ¶ç´„ã®åŽ³ã—ã„ç’°å¢ƒï¼ˆSamsung Galaxy Fold 6ï¼‰ã§ã®é–‹ç™ºã‚’å‰æã¨ã—ã¦ã„ã‚‹ã€‚  
ãã®ãŸã‚ã€ä»¥ä¸‹ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã®ãƒãƒªã‚·ãƒ¼ã‚’å®šã‚ã‚‹ï¼š

- é–‹ç™ºä¸­ã®**ãƒ¡ãƒ¢ãƒªåœ§è¿«ãƒ»ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚’é˜²ããŸã‚ã®æš«å®šæŽªç½®**ã‚’å®‰å…¨ã«å°Žå…¥
- **AIã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ä¸Šæ›¸ããƒªã‚¹ã‚¯**ã«å¯¾å¿œã—ã€é–‹ç™ºç”¨ã‚³ãƒ¼ãƒ‰ãŒæ¶ˆå¤±ã—ãªã„ä»•çµ„ã¿
- ã‚²ãƒ¼ãƒ æœ¬ä½“ã®**ã‚³ãƒ¼ãƒ‰è‚¥å¤§åŒ–ã‚’å›žé¿**
- ãƒªãƒªãƒ¼ã‚¹æ™‚ã«**1ã¤ã®ãƒ•ãƒ©ã‚°æ“ä½œã§å…¨é–‹ç™ºæ©Ÿèƒ½ã‚’ç„¡åŠ¹åŒ–**ã—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ãƒ»ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è² è·ã‚’ã‚¼ãƒ­ã«ã™ã‚‹

---

## 2. åŸºæœ¬æ–¹é‡

### 2.1. é–‹ç™ºæ©Ÿèƒ½ã¯æœ¬ä½“ãƒ­ã‚¸ãƒƒã‚¯ã¨å®Œå…¨åˆ†é›¢
- ã™ã¹ã¦ã®é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨ã‚³ãƒ¼ãƒ‰ã¯ã€`/game/debug` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã«é…ç½®ã™ã‚‹
- `/game/systems` ã‚„ `/game/core` ãªã©æœ¬ä½“ãƒ­ã‚¸ãƒƒã‚¯å†…ã«**ä¸€åˆ‡æ··å…¥ã—ãªã„**

### 2.2. æœ‰åŠ¹/ç„¡åŠ¹ã¯1ã¤ã®ãƒ•ãƒ©ã‚°ã§ä¸€å…ƒç®¡ç†
- `game/debug/DebugConfig.js` ã« `ENABLED` ãƒ•ãƒ©ã‚°ã‚’è¨­ã‘ã‚‹
- ãƒªãƒªãƒ¼ã‚¹æ™‚ã¯ `ENABLED: false` ã«å¤‰æ›´ã™ã‚‹ã ã‘ã§ã€**å…¨é–‹ç™ºæ©Ÿèƒ½ãŒç„¡åŠ¹åŒ–ã•ã‚Œã€å®Ÿè¡Œã•ã‚Œãªã„**

### 2.3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã¸ã®å½±éŸ¿ã¯ã‚¼ãƒ­ã‚’ä¿è¨¼
- `ENABLED: false` æ™‚ã¯ï¼š
  - é–‹ç™ºç”¨ã‚·ã‚¹ãƒ†ãƒ ã¯**ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã•ã‚Œãªã„**
  - é–‹ç™ºç”¨ã‚¯ãƒ©ã‚¹ã¯**ãƒ¡ãƒ¢ãƒªã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã„**ï¼ˆå‹•çš„importåˆ©ç”¨ï¼‰
  - æ¯Žãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†ãŒ**å­˜åœ¨ã—ãªã„** â†’ GCè² è·ãƒ»FPSä½Žä¸‹ã‚¼ãƒ­

### 2.4. AIä¸Šæ›¸ãè€æ€§ã‚’ç¢ºä¿
- `main.js` ã¸ã®ç™»éŒ²ã¯ã€**æ¡ä»¶åˆ†å²ï¼‹å‹•çš„import**ã§è¡Œã†
- AIãŒé™çš„importã‚„ã‚·ã‚¹ãƒ†ãƒ ç™»éŒ²ã‚’ä¸Šæ›¸ãã—ã¦ã‚‚ã€**æ¡ä»¶ãƒ–ãƒ­ãƒƒã‚¯ã‚’æ®‹ã›ã°å®‰å…¨**

---

## 3. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

ShootingGame7/Plan/DESIGN_DOCUMENT.mdã‚’å‚ç…§

> ðŸ’¡ `/game/debug` ã¯**é–‹ç™ºæ™‚å°‚ç”¨**ã€‚  
> ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã§ã¯ã“ã®ãƒ•ã‚©ãƒ«ãƒ€å…¨ä½“ã‚’é™¤å¤–ã—ã¦ã‚‚å•é¡Œãªã„è¨­è¨ˆã¨ã™ã‚‹ã€‚

---

## 4. å®Ÿè£…ãƒ«ãƒ¼ãƒ«

### 4.1. DebugConfig.js ã®å½¢å¼

```js
// game/debug/DebugConfig.js
export const DebugConfig = {
  ENABLED: true, // â† é–‹ç™ºä¸­ã¯ trueã€ãƒªãƒªãƒ¼ã‚¹æ™‚ã¯ false

  // å€‹åˆ¥æ©Ÿèƒ½ã®ç´°ã‹ã„åˆ¶å¾¡ï¼ˆå°†æ¥çš„ã«ä½¿ç”¨ï¼‰
  ENABLE_OFFSCREEN_CLEANUP: true,
  ENABLE_DEBUG_DRAW: false,
  // ...ä»–ã€å¿…è¦ã«å¿œã˜ã¦è¿½åŠ 
};
```

### 4.2. é–‹ç™ºç”¨ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…

- ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `/game/debug/systems/` ä»¥ä¸‹ã«é…ç½®
- é€šå¸¸ã®ã‚·ã‚¹ãƒ†ãƒ ã¨åŒæ§˜ã®ECSæ§‹é€ ï¼ˆ`update()` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒã¤ã‚¯ãƒ©ã‚¹ï¼‰
- `DebugConfig` ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã€å†…éƒ¨ã§å€‹åˆ¥ãƒ•ãƒ©ã‚°ã‚’å‚ç…§å¯èƒ½


### 4.3. main.js ã¸ã®ç™»éŒ²æ–¹æ³• (2025-10-02 æ”¹è¨‚ç‰ˆ)

ãƒ‡ãƒãƒƒã‚°ã‚·ã‚¹ãƒ†ãƒ ã¯ã€ãã®å½¹å‰²ã«å¿œã˜ã¦**å®Ÿè¡Œé †åºã‚’åŽ³å¯†ã«åˆ¶å¾¡ã™ã‚‹**å¿…è¦ãŒã‚ã‚‹ã€‚ãã®ãŸã‚ã€`main.js` å†…ã§è¤‡æ•°ã®ã‚°ãƒ«ãƒ¼ãƒ—ã«åˆ†ã‘ã¦ç™»éŒ²ã™ã‚‹ã€‚

**ã€é‡è¦ã€‘** ä»¥ä¸‹ã®æ§‹é€ ã¯ã€ãƒãƒ¼ã‚ºï¼†ã‚³ãƒžé€ã‚Šæ©Ÿèƒ½ã®æ­£å¸¸å‹•ä½œã«ä¸å¯æ¬ ã§ã‚ã‚‹ã€‚AIã«ã‚ˆã‚‹å®‰æ˜“ãªå¤‰æ›´ã‚’ç¦ãšã‚‹ã€‚

#### ç¾åœ¨ã®å®Ÿè£… (é™çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ)

```js
// game/core/main.js

// --- 1. ãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ã§é™çš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ ---
import { DebugConfig } from '../debug/DebugConfig.js';
import { DebugControlSystem } from '../debug/systems/DebugControlSystem.js';
import { DebugSystem } from '../debug/systems/DebugSystem.js';
import { OffscreenCleanupSystem } from '../debug/systems/OffscreenCleanupSystem.js';


// --- 2. startGameé–¢æ•°å†…ã§ã€å½¹å‰²ã«å¿œã˜ã¦åˆ†é›¢ç™»éŒ² ---
export function startGame(canvas) {
  // ...

  // ã‚°ãƒ«ãƒ¼ãƒ—A: å¸¸ã«æ›´æ–° (å…¥åŠ›ãƒ»åˆ¶å¾¡)
  if (DebugConfig.ENABLED) {
    alwaysUpdateSystems.push(new DebugControlSystem(world));
  }

  // ã‚°ãƒ«ãƒ¼ãƒ—B: ãƒãƒ¼ã‚ºä¸­ã«åœæ­¢ (ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯)
  if (DebugConfig.ENABLED) {
    gameLogicSystems.push(new OffscreenCleanupSystem(world));
  }

  // ã‚°ãƒ«ãƒ¼ãƒ—C: æç”»ã®æœ€å¾Œ (ãƒ‡ãƒãƒƒã‚°è¡¨ç¤º)
  if (DebugConfig.ENABLED) {
    debugSystem = new DebugSystem(world);
  }

  // ... (ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—å†…ã®åˆ†é›¢å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯) ...
}
```

#### ç†æƒ³å½¢ (å°†æ¥ã®èª²é¡Œï¼šå‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ)

ç¾çŠ¶ã¯å®Ÿè£…ã®å®¹æ˜“ã•ã‹ã‚‰é™çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’æŽ¡ç”¨ã—ã¦ã„ã‚‹ãŒã€ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒžãƒ³ã‚¹ã‚’å®Œå…¨ã«æœ€é©åŒ–ã™ã‚‹ãŸã‚ã€å°†æ¥çš„ã«ã¯**å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ (`await import(...)`)** ã¸ã®ç§»è¡Œã‚’ç›®æŒ‡ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€`ENABLED: false` ã®éš›ã«ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ¡ãƒ¢ãƒªã«ä¸€åˆ‡ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªããªã‚‹ã€‚ã“ã®èª²é¡Œã¯ `REFACTORING_PLAN2.md` ã«è¨˜è¼‰æ¸ˆã¿ã€‚

---

## 5. ãƒªãƒªãƒ¼ã‚¹æ‰‹é †

1. `game/debug/DebugConfig.js` ã‚’é–‹ã
2. `ENABLED: true` â†’ `ENABLED: false` ã«å¤‰æ›´
3. ï¼ˆä»»æ„ï¼‰`/game/debug` ãƒ•ã‚©ãƒ«ãƒ€å…¨ä½“ã‚’å‰Šé™¤ or ãƒ“ãƒ«ãƒ‰å¯¾è±¡å¤–ã«è¨­å®š
4. å®Œäº† â†’ ã‚²ãƒ¼ãƒ ã¯**ç´”ç²‹ãªæœ¬ä½“ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿ã§å‹•ä½œ**

---

## 6. æ³¨æ„äº‹é …
- **é–‹ç™ºç”¨ã‚³ãƒ¼ãƒ‰ã‚’æœ¬ä½“ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚³ãƒ”ãƒšã—ãªã„ã“ã¨**
- **`main.js` ã®ã‚·ã‚¹ãƒ†ãƒ ç™»éŒ²ãƒ­ã‚¸ãƒƒã‚¯ã¯ã€ãƒãƒ¼ã‚ºæ©Ÿèƒ½ã®æ ¹å¹¹ã§ã‚ã‚‹ãŸã‚ã€ãã®æ§‹é€ ã‚’ç¶­æŒã™ã‚‹ã“ã¨**
- æ–°ã—ã„é–‹ç™ºæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹éš›ã¯ã€å¿…ãšã“ã®ãƒãƒªã‚·ãƒ¼ã«å¾“ã„ `/game/debug` ã«é…ç½®ã—ã€é©åˆ‡ãªå®Ÿè¡Œã‚°ãƒ«ãƒ¼ãƒ—ã«ç™»éŒ²ã™ã‚‹ã“ã¨

---

> æœ€çµ‚æ›´æ–°æ—¥: 2025å¹´10æœˆ02æ—¥
> ä½œæˆè€…: é–‹ç™ºè€…, Manus
> ç’°å¢ƒ: BlitzIDE + Galaxy Fold 6 (DeX)
```
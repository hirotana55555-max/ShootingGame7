{
  "plan_id": "PROJECT_BRANCH_NORMALIZATION_20251124",
  "plan_name": "ブランチ正規化計画 - 聖遺物の、別室保管",
  "objective": "乱立したブランチを整理し、健全な開発サイクルを確立する。同時に、歴史的遺産（TypeScript化ブランチ）を安全に保管する。",
  "general_policies": {
    "main_branch_policy": "`main`は、常に、現在の、安定した、成果を、反映する、唯一の、正史とする。",
    "relic_branch_policy": "現在の、文脈と、交わらない、重要な、歴史的遺産は、`relic/`プレフィックスを、付けて、永久保管する。安易な、マージを、厳禁とする。"
  },
  "phases": [
    {
      "phase_id": 1,
      "name": "【聖遺物の、封印】`develop`ブランチの、リネーム",
      "status": "COMPLETED",
      "objective": "`develop`ブランチを、歴史的遺産として、安全に、別室保管する。",
      "action_plan": [
        {
          "step": 1.1,
          "description": "ローカルの`develop`ブランチを`relic/20251112_typescript-migration`にリネームする。",
          "command_template": "git branch -m develop relic/20251112_typescript-migration"
        },
        {
          "step": 1.2,
          "description": "リモートの古い`develop`ブランチを削除する。",
          "command_template": "git push origin :develop"
        },
        {
          "step": 1.3,
          "description": "新しい名前の聖遺物ブランチをリモートにプッシュする。",
          "command_template": "git push origin relic/20251112_typescript-migration"
        }
      ]
    },
    {
      "phase_id": 2,
      "name": "【正史の、編纂】`main`ブランチの、現代化",
      "status": "COMPLETED",
      "objective": "現在の、全ての、成果を、`main`ブランチに、安全に、統合する。",
      "action_plan": [
        {
          "step": 2.1,
          "description": "GitHub上で、`feature/dem-unified-server`から`main`へのPull Requestを作成する。"
        },
        {
          "step": 2.2,
          "description": "コンフリクトがないことを確認し、Pull Requestをマージする。"
        }
      ]
    },
    {
      "phase_id": 3,
      "name": "【歴史書の、整理】不要ブランチの、クリーンアップ",
      "status": "COMPLETED",
      "objective": "役目を終えたブランチを整理し、ブランチリストを最新の状態に保つ。",
      "action_plan": [
        {
          "step": 3.1,
          "description": "マージ済みの`feature/dem-unified-server`ブランチを削除する。"
        },
        {
          "step": 3.2,
          "description": "その他の一時的なバックアップブランチ（`origin/feature/dem-chaos-backup-20251122`など）を、必要に応じて、削除、または、アーカイブする。"
        }
      ]
    }
  ]
}
// phases配列の、一番最後に、この、ブロックを、追加
    {
      "phase_id": 4,
      "name": "【防衛システムの、課題記録】GitHub Actionsの、安定化",
      "status": "PENDING_REFACTOR",
      "objective": "GitHub Actionsの、`dry-run`時に、発生する、エラーの、根本原因を、解決し、CI/CDを、完全に、安定させる。",
      "problem_analysis": {
        "symptom": "GitHub Actionsの、手動実行（dry-run）時に、`query_index.js`が、`TypeError: Cannot read properties of null`で、失敗する。",
        "root_cause": "リモート環境では、`dry-run`時に、DBファイルが、生成されないため、統計情報表示スクリプトが、空の、DBを、読んで、エラーとなる。",
        "local_vs_remote": "ローカルでは、既存の、DBファイルが、存在するため、この、問題は、発生しない。この、環境差が、問題の、発見を、遅らせた。"
      },
      "action_plan": [
        {
          "step": 4.1,
          "description": "【要リファクタリング】`indexer.js`を、改造し、`--dry-run`時には、インメモリDBを、使用し、統計情報も、自己完結で、表示するように、変更する。",
          "note": "この、改修は、`indexer.js`が、複雑化しているため、リスクが、高い。事前に、`indexer.js`自体の、リファクタリング（機能分割など）を、検討することが、望ましい。"
        },
        {
          "step": 4.2,
          "description": "【要リファクタリング】`cognize_indexer.yml`を、改造し、`dry-run`時には、`query_index.js`を、呼び出す、ステップを、実行しないように、変更する。"
        }
      ]
    }
,
{
  "phase_id": 5,
  "name": "【聖遺物の、鑑定調査】",
  "priority": 99,
  "status": "FROZEN",
  "objective": "旧develop（relic/20251112_typescript-migration）の歴史的価値を判断する。",
  "summary": "【最終結論：2025/11/24】現mainブランチに、TypeScript化の成果が含まれていることを確認。relicブランチの価値は限定的であり、調査は困難と判断。コストに見合わないため、これ以上の調査を『凍結』する。"
}
